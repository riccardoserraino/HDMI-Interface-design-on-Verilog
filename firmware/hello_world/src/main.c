/*
 ============================================================================
 Name        : main.c
 Author      : Giuliano Livi and Riccardo Serraino
 Version     :
 Copyright   : Your copyright notice
 Description : Communication between UART and HDMI
 ============================================================================
 */

#include <stdint.h>
#include <unistd.h>
#include <stdio.h>
#include "platform.h"
#include "init.h"
#include "bsp/hbird-e200/drivers/bitmap/bitmap.h"

#define STRBUF_SIZE			256	// String buffer size
#define UART_RECEIVE_DATA_ADDR 0x004  //address needed to point the right register in the UART to receive data
#define UART_BASE_ADDR 0x10013000


// Function to toggle the most significant bit (MSB)
uint32_t toggleMSB(uint32_t num) {
    return num ^ 0x10000; //to change the 17th bit
}

const uint8_t initial_message[40] = {87, 114, 105, 116, 101, 32, 121, 111, 117, 114, 32, 
                                     116, 101, 120, 116, 32, 98, 101, 108, 111, 119, 58, 
                                     32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 
                                     32, 32, 32, 32, 32};

const uint16_t bitmap[96][16] = {
//Bitmap for ASCII character 32
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

// Bitmap for ASCII character 33 ('!'):
{
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000
},

//Bitmap for ASCII character 34 ('"'):
{
0x0000,
0x0000,
0x6600,
0x6600,
0x6600,
0x6600,
0x2400,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 35 ('#'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0CC0,
0x0CC0,
0x7FF0,
0x1980,
0x1980,
0x7FF0,
0x3300,
0x3300,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 36 ('$'):
{
0x0000,
0x0000,
0x0000,
0x0600,
0x1FC0,
0x3320,
0x3300,
0x3300,
0x1FC0,
0x0360,
0x3360,
0x3320,
0x1FC0,
0x0600,
0x0000,
0x0000
},

//Bitmap for ASCII character 37 ('%'):
{
0x0000,
0x0000,
0x0000,
0x3000,
0x68C0,
0x6980,
0x6E00,
0x0600,
0x0C00,
0x1800,
0x3000,
0x6700,
0xC680,
0x0180,
0x0000,
0x0000
},

//Bitmap for ASCII character 38 ('&'):
{
0x0000,
0x0000,
0x1E00,
0x3300,
0x3300,
0x3600,
0x1C00,
0x3B00,
0x6D80,
0x6580,
0x6380,
0x3380,
0x1FC0,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 39 ('''):
{
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0400,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 40 ('('):
{
0x0000,
0x0000,
0x0300,
0x0600,
0x0C00,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x0C00,
0x0600,
0x0300,
0x0000,
0x0000
},

//Bitmap for ASCII character 41 (')'):
{
0x0000,
0x0000,
0x3000,
0x1800,
0x0C00,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x0C00,
0x1800,
0x3000,
0x0000,
0x0000
},

//Bitmap for ASCII character 42 ('*'):
{
0x0000,
0x0000,
0x0000,
0x0C00,
0x7FC0,
0x3F80,
0x1E00,
0x3F80,
0x7FC0,
0x0C00,
0x1800,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 43 ('+'):
{
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0C00,
0xFFF0,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 44 (','):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0400,
0x0000,
0x0000
},

//Bitmap for ASCII character 45 ('-'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0xFFF0,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},


//Bitmap for ASCII character 46 ('.')
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 47 ('/')
{
0x0000,
0x0000,
0x0060,
0x00C0,
0x0180,
0x0300,
0x0300,
0x0600,
0x0C00,
0x0C00,
0x1800,
0x3000,
0x3000,
0x6000,
0x0000,
0x0000
},

{
0x0000,
0x1E00,
0x3300,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x3300,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 49 ('1'):
{
0x0000,
0x0000,
0x0C00,
0x1C00,
0x3C00,
0x6C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x7F00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 50 ('2'):
{
0x0000,
0x0000,
0x3E00,
0x6700,
0x4300,
0x0300,
0x0700,
0x0E00,
0x1C00,
0x3800,
0x7000,
0x7F00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 51 ('3'):
{
0x0000,
0x0000,
0x3E00,
0x6700,
0x0300,
0x0300,
0x1E00,
0x0300,
0x0180,
0x0180,
0x6300,
0x3E00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 52 ('4'):
{
0x0000,
0x0000,
0x0600,
0x0E00,
0x0E00,
0x1E00,
0x3600,
0x6600,
0x7F00,
0x0600,
0x0600,
0x1F80,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 53 ('5'):
{
0x0000,
0x7F80,
0x6000,
0x6000,
0x6000,
0x7F00,
0x6180,
0x0180,
0x0180,
0x0180,
0x6180,
0x3F00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 54 ('6'):
{
0x0000,
0x1F00,
0x3180,
0x6180,
0x6000,
0x6000,
0x7F00,
0x6180,
0x6180,
0x6180,
0x6180,
0x3180,
0x1F00,
0x0000,
0x0000,
0x0000
},


//Bitmap for ASCII character 55 ('7'):

{
0x0000,
0x7F80,
0x0180,
0x0300,
0x0300,
0x0600,
0x0600,
0x0C00,
0x0C00,
0x1800,
0x1800,
0x1800,
0x1800,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 56 ('8'):
{
0x0000,
0x1F00,
0x3180,
0x6180,
0x6180,
0x3180,
0x1F00,
0x3180,
0x6180,
0x6180,
0x6180,
0x3180,
0x1F00,
0x0000,
0x0000,
0x0000
},


//Bitmap for ASCII character 57 ('9'):
{
0x0000,
0x1F00,
0x3180,
0x6180,
0x6180,
0x6180,
0x3180,
0x1F80,
0x0180,
0x0180,
0x0180,
0x6180,
0x3F00,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 58 (':'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 59 (';'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0C00,
0x0C00,
0x0600,
0x0600,
0x0000,
0x0000
},

//Bitmap for ASCII character 60 ('<'):
{
0x0000,
0x0000,
0x0300,
0x0C00,
0x3000,
0x6000,
0x3000,
0x0C00,
0x0300,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 61 ('='):
{
0x0000,
0x0000,
0x0000,
0x0000,
0xFFFF,
0x0000,
0x0000,
0xFFFF,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 62 ('>'):
{
0x0000,
0x0000,
0x6000,
0x1C00,
0x0600,
0x0180,
0x0180,
0x0180,
0x0180,
0x0180,
0x0600,
0x1C00,
0x6000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 63 ('?'):
{
0x0000,
0x1F00,
0x3180,
0x60C0,
0x60C0,
0x0180,
0x0300,
0x0E00,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0C00,
0x0C00,
0x0000,
0x0000
},


//Bitmap for ASCII character 64 ('@'):
{
0x0000,
0x0F80,
0x3060,
0x6030,
0x4398,
0xC4C8,
0xC848,
0xC848,
0xC848,
0xC848,
0xCFD8,
0x6000,
0x3000,
0x0F80,
0x0000,
0x0000
},
//Bitmap for ASCII character 65 ('A'):
{
0x0000,
0x0C00,
0x0C00,
0x1E00,
0x3300,
0x3300,
0x3300,
0x7F80,
0x6180,
0xC0C0,
0xC0C0,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 66 ('B'):
{
0x0000,
0xFE00,
0x6300,
0x6300,
0x6300,
0x7E00,
0x6300,
0x6180,
0x6180,
0x6300,
0xFE00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 67 ('C'):
{
0x0000,
0x1F00,
0x30C0,
0x6000,
0xC000,
0xC000,
0xC000,
0xC000,
0x6000,
0x30C0,
0x1F00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 68 ('D'):
{
0x0000,
0xFC00,
0x6600,
0x6300,
0x6180,
0x6180,
0x6180,
0x6300,
0x6300,
0x6600,
0xFC00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 69 ('E'):
{
0x0000,
0xFF00,
0x6000,
0x6000,
0x6000,
0x7E00,
0x6000,
0x6000,
0x6000,
0x6000,
0xFF00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 70 ('F'):
{
0x0000,
0xFF00,
0x6000,
0x6000,
0x6000,
0x7E00,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},


//Bitmap for ASCII character 71 ('G'):
{
0x0000,
0x1F00,
0x30C0,
0x6000,
0xC000,
0xC000,
0xC000,
0xC380,
0x60C0,
0x30C0,
0x1F00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 72 ('H'):
{
0x0000,
0x6180,
0x6180,
0x6180,
0x6180,
0x7F80,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 73 ('I'):
{
0x0000,
0x1E00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 74 ('J'):
{
0x0000,
0x0FC0,
0x0180,
0x0180,
0x0180,
0x0180,
0x0180,
0x6180,
0x6180,
0x3300,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 75 ('K'):
{
0x0000,
0x6180,
0x6300,
0x6600,
0x6C00,
0x7800,
0x6C00,
0x6600,
0x6300,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 76 ('L'):
{
0x0000,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0x6000,
0xFF00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 77 ('M'):
{
0x0000,
0x6180,
0x7380,
0x7F80,
0x6D80,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 78 ('N'):
{
0x0000,
0x6180,
0x7180,
0x7980,
0x6D80,
0x6780,
0x6380,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 79 ('O'):
{
0x0000,
0x1F00,
0x30C0,
0x6060,
0xC030,
0xC030,
0xC030,
0xC030,
0x6060,
0x30C0,
0x1F00,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 80 ('P'):
{
0x0000,
0xFE00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6300,
0x7E00,
0x6000,
0x6000,
0x6000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 81 ('Q'):
{
0x0000,
0x1F00,
0x30C0,
0x6060,
0xC030,
0xC030,
0xC030,
0xC030,
0x6360,
0x3380,
0x1FC0,
0x00C0,
0x0070,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 82 ('R'):
{
0x0000,
0xFE00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6300,
0x7E00,
0x6C00,
0x6600,
0x6300,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 83 ('S'):
{
0x0000,
0x1F80,
0x3000,
0x6000,
0x6000,
0x6000,
0x3F00,
0x01C0,
0x00C0,
0x00C0,
0x0180,
0xFE00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 84 ('T'):
{
0x0000,
0xFF80,
0xCC00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 85 ('U'):
{
0x0000,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x3300,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 86 ('V'):
{
0x0000,
0xC0C0,
0xC0C0,
0x6180,
0x6180,
0x3300,
0x3300,
0x1E00,
0x1E00,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 87 ('W'):
{
0x0000,
0xC060,
0xC060,
0xDB60,
0x7BC0,
0x7BC0,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 88 ('X'):
{
0x0000,
0xC0C0,
0xC0C0,
0x6180,
0x3300,
0x1E00,
0x0C00,
0x0C00,
0x1E00,
0x3300,
0x6180,
0xC0C0,
0xC0C0,
0x0000,
0x0000,
0x0000
},

//Bitmap for ASCII character 89 ('Y'):
{
0x0000,
0xC0C0,
0xC0C0,
0x6180,
0x6180,
0x3300,
0x1E00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 90 ('Z'):
{
0x0000,
0xFFC0,
0x0180,
0x0300,
0x0600,
0x0C00,
0x0C00,
0x1800,
0x3000,
0x6000,
0xFFC0,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 91 ('['):
{
0x0000,
0x0000,
0x1F00,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1800,
0x1F00,
0x0000,
0x0000
},
//Bitmap for ASCII character 92 ('\'):
{
0x0000,
0x0000,
0x6000,
0x3000,
0x3000,
0x1800,
0x1800,
0x0C00,
0x0C00,
0x0600,
0x0600,
0x0300,
0x0300,
0x0180,
0x0000,
0x0000
},
//Bitmap for ASCII character 93 (']'):
{
0x0000,
0x0000,
0x7C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x7C00,
0x0000,
0x0000
},
//Bitmap for ASCII character 94 ('^'):
{
0x0000,
0x0000,
0x0C00,
0x1E00,
0x3300,
0x6180,
0xC0C0,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 95 ('_'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0xFFC0,
0x0000
},
//Bitmap for ASCII character 96 ('`'):
{
0x0000,
0x0000,
0x0C00,
0x0600,
0x0300,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 97 ('a'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1E00,
0x3300,
0x0300,
0x3F00,
0x6300,
0x6300,
0x6700,
0x3B80,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 98 ('b'):
{
0x0000,
0x6000,
0x6000,
0x6000,
0x7E00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x7E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 99 ('c'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1F00,
0x3100,
0x6000,
0x6000,
0x6000,
0x6000,
0x3100,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 100 ('d'):
{
0x0000,
0x0180,
0x0180,
0x0180,
0x1F80,
0x3180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x3F80,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 101 ('e'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1E00,
0x3300,
0x6180,
0x7F80,
0x6000,
0x6000,
0x3100,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 102 ('f'):
{
0x0000,
0x0700,
0x0C00,
0x0C00,
0x7F80,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x3E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 103 ('g'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1FC0,
0x3180,
0x6180,
0x6180,
0x6180,
0x3180,
0x1F80,
0x0180,
0x6180,
0x6180,
0x3F00,
0x0000
},
//Bitmap for ASCII character 104 ('h'):
{
0x0000,
0x6000,
0x6000,
0x6000,
0x7E00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 105 ('i'):
{
0x0000,
0x0C00,
0x0C00,
0x0000,
0x1E00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 106 ('j'):
{
0x0000,
0x0600,
0x0600,
0x0000,
0x0F00,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x0600,
0x6600,
0x7C00,
0x0000
},
//Bitmap for ASCII character 107 ('k'):
{
0x0000,
0x6000,
0x6000,
0x6000,
0x6300,
0x6600,
0x6C00,
0x7800,
0x6C00,
0x6600,
0x6300,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 108 ('l'):
{
0x0000,
0x1E00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x0C00,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 109 ('m'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x6660,
0x7FF0,
0x7330,
0x6330,
0x6330,
0x6330,
0x6330,
0x6330,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 110 ('n'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x7E00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x6180,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 111 ('o'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1E00,
0x3300,
0x6180,
0x6180,
0x6180,
0x6180,
0x3300,
0x1E00,
0x0000,
0x0000,
0x0000,
0x0000
},
//Bitmap for ASCII character 112 ('p'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x7E00,
0x6300,
0x6180,
0x6180,
0x6180,
0x6300,
0x7E00,
0x6000,
0x6000,
0x6000,
0x6000,
0x0000
},
//Bitmap for ASCII character 113 ('q'):
{
0x0000,
0x0000,
0x0000,
0x0000,
0x1F80,
0x3180,
0x6180,
0x6180,
0x6180,
0x6180,
0x3180,
0x1F80,
0x0180,
0x0180,
0x0180,
0x0000
},

//Bitmap for ASCII character 114 ('r'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x7F00,
    0x6100,
    0x6000,
    0x6000,
    0x6000,
    0x6000,
    0x6000,
    0x6000,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 115 ('s'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x3F80,
    0x6000,
    0x6000,
    0x3E00,
    0x0300,
    0x0180,
    0x0180,
    0x7F00,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 116 ('t'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0C00,
    0x0C00,
    0xFF80,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0F00,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 117 ('u'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x6180,
    0x6180,
    0x6180,
    0x6180,
    0x6180,
    0x6180,
    0x6380,
    0x3D80,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 118 ('v'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x60C0,
    0x60C0,
    0x60C0,
    0x6180,
    0x3300,
    0x3300,
    0x1E00,
    0x1E00,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 119 ('w'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x6030,
    0x6030,
    0x6030,
    0x6360,
    0x63C0,
    0x63C0,
    0x3180,
    0x3180,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},

//Bitmap for ASCII character 120 ('x'):
{
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x6180,
    0x6180,
    0x3300,
    0x1E00,
    0x1E00,
    0x3300,
    0x6180,
    0x6180,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
//Bitmap for ASCII character 121 ('y'):
{                       
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x6180,
    0x6180,
    0x6180,
    0x6180,
    0x6180,
    0x3380,
    0x1D80,
    0x0180,
    0x6180,
    0x6180,
    0x3F00,
    0x0000
},
{                                  //Bitmap for ASCII character 122 ('z'):
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x7F80,
    0x0180,
    0x0300,
    0x0600,
    0x0C00,
    0x1800,
    0x3000,
    0x7F80,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
{                              //Bitmap for ASCII character 123 ('{'):
    0x0000,
    0x0000,
    0x0E00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x3C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0E00,
    0x0000,
    0x0000,
    0x0000,
    0x0000

},
{                           //Bitmap for ASCII character 124 ('|'):
    0x0000,
    0x0000,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},
{                           //Bitmap for ASCII character 125 ('}'):
    0x0000,
    0x0000,
    0x3800,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0E00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x0C00,
    0x3800,
    0x0000,
    0x0000,
    0x0000,
    0x0000
},

{                           //Bitmap for ASCII character 126 ('~'):
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x7060,
    0xCCC0,
    0x0700,
    0x0000,
    0x0000,
    0x0000
},
{                           //Bitmap for ASCII character 127 ('DEL'):
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000,
    0x0000
}
};


int main(void)
{
	uint32_t reg_value;
	uint32_t flag;
	uint16_t transfer_data;
	uint8_t ascii_code;
	uint32_t extended_data;
	_init();
    //loop for displaying initial message
	for(int i = 0; i < 40; i++){
		reg_value = initial_message[i]; //i need to print "write your text below:" in the first line of my display
		ascii_code = reg_value & 0xFF; //ascii code extraction 

		for (int j = 0; j < 16; j++){
			transfer_data = bitmap[ascii_code - 32][j];
			extended_data = transfer_data; //bitmap data stored in extended data
			if((j%2)==1){
				extended_data = toggleMSB(extended_data); //if the line is a odd number i change the 17th bit (binary)
			}
            MY_PERIPH_REG(MY_PERIPH_REG_IO) = extended_data; // Send the extended data to the peripheral register
		}
	}
    //continuous loop for displaying input received from keyboard
	while(1){
		reg_value = UART0_REG(UART_RECEIVE_DATA_ADDR);
		flag = reg_value >> 31;
		ascii_code = reg_value & 0xFF;
		if (flag == 0){
			for (int i = 0; i < 16; i ++){
				transfer_data = bitmap[ascii_code - 32][i];
				extended_data = transfer_data;
				if((i%2)==1){
					extended_data = toggleMSB(extended_data);
				}
                MY_PERIPH_REG(MY_PERIPH_REG_IO) = extended_data; 
			}
		}
	}
	return 0;
}